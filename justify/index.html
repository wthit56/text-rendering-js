<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Text Rendering with JS</title>
		<style type="text/css">
			body {font-size:14px; line-height:25px;}
			form {width:300px; margin:auto;}
			p {margin:0; text-indent:20px; text-align:justify;}
		</style>
    </head>
    <body>
        <form>
			<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla commodo massa vel lacus vulputate sollicitudin.</p>
			<hr />
			<p style="text-indent:0; font-family:sans-serif;">
				The line breaks above are created from the CSS settings; the line breaks below 
				are created based on what is returned by the 
				<em>justify(text, width, style)</em> function.
			</p>
			<hr />
		</form>

		<script src="../proxy.js" type="text/javascript"></script>
		<script src=".js" type="text/javascript"></script>
		<script type="text/javascript">
  	var form = document.getElementsByTagName("form")[0];

  	[
  	    "Lorem ipsum dolor sit amet, consectetur ",
  	    "adipiscing elit. Nulla commodo massa vel lacus ",
  	    "vulputate sollicitudin."
  	].forEach(function (v, i, a) {
  		var div = document.createElement("DIV");
  		if (i === 0) { div.style.marginLeft = "20px"; }

  		if (i < a.length - 1) {
  			var wordPadding = justify(v, ((i === 0) ? 280 : 300));
  			console.log(wordPadding);

  			v = v.replace(/\s*$/, "").split(" ").forEach(function (v, i, a) {
  				var span = div.appendChild(document.createElement("SPAN"));
  				span.innerText = v;

  				if (i < a.length - 1) {
  					span.style.marginRight = wordPadding + "px";
  				}
  			});
  		}
  		else {
  			div.innerText = v;
  		}

  		form.appendChild(div);
  	});
		</script>
    </body>
</html>
